<html>
    <head>
        <title>CoolProject11</title>
        <script src="/socket.io/socket.io.js"></script>
        <script src="/three/three.min.js"></script>

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script>
            var socket = io();
            var tweets = [];
            var sentiment = [];
            socket.on('tweet', function (response) {
                tweets.push(response);
            });
            socket.on('sentiment', function (response) {
                sentiment.push(response);
            });
            function checkStacks() {
                if (tweets.length > 0 && sentiment.length > 0) {
                    var found = false;
                    for (var i = 0; i < tweets.length; i++) {
                        if (tweets[0].id == sentiment[i].id) {
                            found = true;
                            var tmp = sentiment[0];
                            sentiment[0] = sentiment[i];
                            sentiment[i] = tmp;
                        }
                    }
                    if (found) {
                        $("#table").find('tbody')
                        .append($('<tr>'))
                        .append($('<td>').text(tweets[0].id + " | "+ sentiment[0].id))
                        .append($('<td>').text(tweets[0].text))
                        .append($('<td>').text(sentiment[0].response.documentSentiment.polarity))
                        .append($('<td>').text(sentiment[0].response.documentSentiment.magnitude))
                        tweets = tweets.splice(1,tweets.length);
                        sentiment = sentiment.splice(1,sentiment.length);
                    }
                }
            }
            setInterval(checkStacks,100);
        </script>
    </head>
    <body>
        <h1 id=""></h1>
        <p>Here are all the recent tweets from this user, along with a sentiment value from 0-100</p>
<div width="500px">
<table class="table" id="table" width="1000px" align="right">
          <tr>
            <th>ID | ID</th>
            <th>Tweet</th>
            <th>Polarity</th>
            <th>Magnitude</th>
          </tr>
        </table>
        </div>
    <script>
        socket.emit('interrogate', window.location.pathname.substr(1,window.location.pathname.length-1));
</script>
            

    </script>
    </body>
</html>